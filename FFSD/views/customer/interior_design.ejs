<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interior Designer Portfolio | Build & Beyond</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #d4af37;
            --accent: #3498db;
            --light: #f8f9fa;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        body {
            @apply bg-gray-100 text-gray-700;
        }

        .container {
            @apply max-w-7xl mx-auto my-8 bg-white rounded-2xl shadow-lg flex flex-col md:flex-row overflow-hidden;
        }

        .left-section {
            @apply w-full md:w-2/5 p-6 bg-gray-50 border-r border-gray-200 overflow-y-auto;
            max-height: 80vh;
        }

        .right-section {
            @apply w-full md:w-3/5 p-6 flex flex-col;
        }

        .right-content {
            @apply flex-1 overflow-y-auto pr-2;
        }

        .search-box {
            @apply relative mb-4 sticky top-0 bg-gray-50 z-10;
        }

        .search-box input {
            @apply w-full p-3 pl-10 border border-gray-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500;
        }

        .search-box i {
            @apply absolute left-3 top-1/2 -translate-y-1/2 text-gray-400;
        }

        .designer-card {
            @apply flex p-4 mb-4 rounded-lg border border-gray-200 bg-white cursor-pointer hover:border-yellow-500 transition-all;
        }

        .designer-card.active {
            @apply bg-yellow-50 border-yellow-500;
        }

        .designer-image-small {
            @apply w-16 h-16 rounded-lg object-cover mr-4 border-2 border-gray-200;
        }

        .designer-info h3 {
            @apply text-lg font-semibold text-primary mb-1;
        }

        .designer-info p {
            @apply text-sm text-gray-500 mb-1;
        }

        .rating {
            @apply flex items-center mt-2;
        }

        .rating .star {
            @apply text-yellow-400 text-sm mr-1;
        }

        .rating-count {
            @apply text-sm text-gray-500 ml-2;
        }

        .designer-header {
            @apply flex items-center mb-6 pb-4 border-b border-gray-200;
        }

        .designer-image-large {
            @apply w-24 h-24 rounded-lg object-cover mr-6 border-4 border-gray-200 shadow-md;
        }

        .designer-header-content h2 {
            @apply text-xl font-semibold text-primary mb-1;
        }

        .bio, .projects {
            @apply mb-6;
        }

        .bio h3, .projects h3 {
            @apply text-lg font-semibold text-primary mb-4 relative;
        }

        .bio h3::after, .projects h3::after {
            @apply absolute bottom-0 left-0 w-10 h-1 bg-yellow-500 rounded;
            content: '';
        }

        .specialties {
            @apply flex flex-wrap gap-2 mt-3;
        }

        .specialty {
            @apply bg-yellow-50 text-yellow-600 px-3 py-1 rounded-full text-sm font-medium;
        }

        .project {
            @apply mb-6 p-4 rounded-lg bg-gray-50 hover:shadow-md transition-all;
        }

        .project-image {
            @apply w-full h-48 object-cover rounded-lg mb-3 shadow-sm;
        }

        .project-meta {
            @apply flex flex-wrap gap-3 text-sm text-gray-500 mt-2;
        }

        .project-meta i {
            @apply text-yellow-500 mr-1;
        }

        .book-now-container {
            @apply p-4 bg-white border-t border-gray-200 text-center;
        }

        .book-now-btn {
            @apply bg-yellow-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-yellow-600 hover:shadow-lg transition-all flex items-center justify-center mx-auto;
        }

        .company-info {
            @apply p-6 bg-gradient-to-br from-yellow-50 to-blue-50 rounded-lg border-l-4 border-yellow-500 mb-6;
        }

        .company-info ul {
            @apply list-none;
        }

        .company-info ul li {
            @apply mb-2 pl-6 relative;
        }

        .company-info ul li::before {
            @apply absolute left-0 text-yellow-500 font-bold;
            content: '✓';
        }

        .designer-details {
            @apply hidden;
        }

        .designer-details.active {
            @apply block animate-fadeIn;
        }

        .no-designers {
            @apply text-center p-6 text-gray-500;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .container {
                @apply flex-col;
            }

            .left-section {
                @apply border-b border-gray-200 max-h-96;
            }

            .designer-card, .designer-header {
                @apply flex-col text-center;
            }

            .designer-image-small, .designer-image-large {
                @apply mb-4 mx-auto;
            }
        }
    </style>
</head>
<body>
    <%- include('navbar_customer') %>
    <h1 class="heading text-2xl font-bold text-primary relative text-center my-8 after:content-[''] after:absolute after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:w-20 after:h-1 after:bg-yellow-500 after:rounded">Hire Interior Designers</h1>
    <div class="container">
        <div class="left-section" id="designerList">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search designers..." id="designerSearch" aria-label="Search interior designers">
            </div>
            <% if (designers?.length) { %>
                <% designers.forEach((designer) => { %>
                    <div class="designer-card" data-id="<%= designer._id %>" role="button" aria-label="Select designer <%= designer.name %>">
                        <img src="<%= designer.profileImage || 'https://via.placeholder.com/80' %>" 
                             alt="<%= designer.name %>" class="designer-image-small" loading="lazy">
                        <div class="designer-info">
                            <h3><%= designer.name %></h3>
                            <p><%= designer.professionalTitle || 'Interior Designer' %></p>
                            <p><i class="fas fa-briefcase"></i> <%= designer.experience %> years</p>
                            <div class="rating">
                                <% for(let i = 0; i < Math.floor(designer.rating); i++) { %>
                                    <span class="star">★</span>
                                <% } %>
                                <% if(designer.rating % 1 >= 0.5) { %>
                                    <span class="star">½</span>
                                <% } %>
                                <span class="rating-count">(<%= designer.rating %>)</span>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div class="no-designers">
                    <p>No interior designers available.</p>
                </div>
            <% } %>
        </div>
        
        <div class="right-section">
            <div class="right-content" id="designerDetails">
                <div class="initial-message animate-fadeIn">
                    <div class="company-info">
                        <h2 class="text-xl font-semibold text-primary">Welcome to Build & Beyond Interior Designers</h2>
                        <p>Leading design firm creating innovative, sustainable interior spaces for over 20 years.</p>
                        <h3 class="text-lg font-semibold text-primary">Our Mission</h3>
                        <p>Designing spaces that enhance life quality, promote sustainability, and reflect client identity.</p>
                        <h3 class="text-lg font-semibold text-primary">Our Services</h3>
                        <ul>
                            <li>Residential Interior Design</li>
                            <li>Commercial Interior Design</li>
                            <li>Space Planning</li>
                            <li>Furniture Design</li>
                            <li>Lighting Design</li>
                            <li>Sustainable Design</li>
                            <li>Color Consultation</li>
                        </ul>
                    </div>
                </div>
                
                <% if (designers?.length) { %>
                    <% designers.forEach(designer => { %>
                        <div class="designer-details" id="designer-<%= designer._id %>">
                            <div class="designer-header">
                                <img src="<%= designer.profileImage || 'https://via.placeholder.com/120' %>" 
                                     alt="<%= designer.name %>" class="designer-image-large" loading="lazy">
                                <div class="designer-header-content">
                                    <h2><%= designer.name %></h2>
                                    <p><strong><%= designer.professionalTitle || 'Interior Designer' %></strong></p>
                                    <p><i class="fas fa-briefcase"></i> <%= designer.experience %> years</p>
                                    <div class="rating">
                                        <% for(let i = 0; i < Math.floor(designer.rating); i++) { %>
                                            <span class="star">★</span>
                                        <% } %>
                                        <% if(designer.rating % 1 >= 0.5) { %>
                                            <span class="star">½</span>
                                        <% } %>
                                        <span class="rating-count">(<%= designer.rating %>)</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bio">
                                <h3>About</h3>
                                <p><%= designer.about || 'Information not available' %></p>
                                <% if (designer.specialties?.length) { %>
                                    <div class="specialties">
                                        <% designer.specialties.forEach(specialty => { %>
                                            <span class="specialty"><%= specialty %></span>
                                        <% }); %>
                                    </div>
                                <% } %>
                            </div>
                            
                            <div class="projects">
                                <h3>Notable Projects</h3>
                                <% if (designer.projects?.length) { %>
                                    <% designer.projects.forEach(project => { %>
                                        <div class="project">
                                            <h4><%= project.name %></h4>
                                            <div class="project-meta">
                                                <span><i class="fas fa-calendar-alt"></i> <%= project.year %></span>
                                                <span><i class="fas fa-map-marker-alt"></i> <%= project.location %></span>
                                            </div>
                                            <img src="<%= project.image || 'https://via.placeholder.com/300' %>" 
                                                 alt="<%= project.name %>" class="project-image" loading="lazy">
                                            <p><%= project.description %></p>
                                        </div>
                                    <% }); %>
                                <% } else { %>
                                    <p>No projects available.</p>
                                <% } %>
                            </div>
                        </div>
                    <% }); %>
                <% } %>
            </div>
            
            <div class="book-now-container">
                <form id="bookDesignerForm" action="/interiordesign_form" method="GET">
                    <input type="hidden" name="workerId" id="selectedWorkerId" value="">
                    <button type="submit" class="book-now-btn" id="bookNowBtn" disabled>
                        Book Consultation <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>
    <%- include('customer_footer') %>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const designerCards = document.querySelectorAll('.designer-card');
            const initialMessage = document.querySelector('.initial-message');
            const bookNowBtn = document.getElementById('bookNowBtn');
            const selectedWorkerIdInput = document.getElementById('selectedWorkerId');
            const searchInput = document.getElementById('designerSearch');
            const scrollableSections = document.querySelectorAll('.left-section, .right-content');

            // Designer selection
            designerCards.forEach(card => {
                card.addEventListener('click', () => {
                    designerCards.forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                    
                    const designerId = card.dataset.id;
                    selectedWorkerIdInput.value = designerId;
                    
                    initialMessage.style.transition = 'opacity 0.3s ease';
                    initialMessage.style.opacity = '0';
                    setTimeout(() => {
                        initialMessage.style.display = 'none';
                        document.querySelectorAll('.designer-details').forEach(detail => {
                            detail.classList.toggle('active', detail.id === `designer-${designerId}`);
                        });
                    }, 300);
                    
                    bookNowBtn.disabled = false;
                });
            });

            // Search functionality
            searchInput?.addEventListener('input', () => {
                const searchTerm = searchInput.value.toLowerCase();
                designerCards.forEach(card => {
                    const name = card.querySelector('h3').textContent.toLowerCase();
                    const title = card.querySelector('p').textContent.toLowerCase();
                    card.style.display = name.includes(searchTerm) || title.includes(searchTerm) ? '' : 'none';
                });
            });

            // Form validation
            document.getElementById('bookDesignerForm')?.addEventListener('submit', (e) => {
                if (!selectedWorkerIdInput.value) {
                    e.preventDefault();
                    alert('Please select an interior designer before booking.');
                }
            });

            // Prevent scroll chaining
            scrollableSections.forEach(section => {
                section.addEventListener('wheel', (e) => {
                    const delta = e.deltaY;
                    const { scrollTop, scrollHeight, clientHeight } = section;
                    if (
                        (delta > 0 && scrollTop + clientHeight >= scrollHeight - 1) ||
                        (delta < 0 && scrollTop <= 0)
                    ) {
                        e.preventDefault();
                    }
                }, { passive: false });
            });

            // Notification panel
            const notificationIcon = document.getElementById('notificationIcon');
            const notificationPanel = document.getElementById('notificationPanel');
            if (notificationIcon && notificationPanel) {
                notificationIcon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    notificationPanel.classList.toggle('show');
                });
                document.addEventListener('click', (e) => {
                    if (!notificationPanel.contains(e.target) && !notificationIcon.contains(e.target)) {
                        notificationPanel.classList.remove('show');
                    }
                });
            }
        });
    </script>
</body>
</html>