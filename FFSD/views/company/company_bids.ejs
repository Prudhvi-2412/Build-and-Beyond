<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bidding System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
    /* --- CORPORATE/ESTABLISHED COLOR PALETTE --- */
    :root {
        --primary-accent: #004D7A;       /* Deep Navy Blue for Authority/Trust */
        --primary-accent-hover: #003355; /* Darker Navy for interaction */
        --background-light: #F8F9FA;     /* Very light, soft grey background */
        --content-light: #FFFFFF;        /* Pure white for cards */
        --text-primary: #212529;         /* Dark charcoal for main text */
        --text-secondary: #6C757D;       /* Medium grey for labels */
        --text-on-accent: #FFFFFF;       /* White text on accent colors */
        --button-secondary-bg: #E9ECEF;  /* Light grey for secondary buttons */
        --highlight-color: #A06700;      /* Muted Gold/Amber for emphasis/pending */
        
        /* Status Colors - Sophisticated Tones */
        --status-success-bg: #D4EDDA;    
        --status-success-text: #155724;  
        --status-warning-bg: #FFF3CD;    
        --status-warning-text: #856404;  
        --status-danger-bg: #F8D7DA;     
        --status-danger-text: #721C24;   
        
        /* ESTABLISHED DESIGN: Structural Styles */
        --card-radius: 8px; /* Slightly less round for professionalism */
        --soft-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        --input-focus-shadow: 0 0 0 3px rgba(0, 77, 122, 0.1); 

        --primary-teal: var(--primary-accent); /* Mapping old variables */
        --primary-teal-light: #0077B6; 
        --primary-teal-dark: var(--primary-accent-hover);
        --orange: var(--highlight-color);
        --text-dark: var(--text-primary);
        --text-medium: var(--text-secondary);
        --border-light: #D1D5DB;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
    }

    body, html {
        height: 100%;
        width: 100%;
        background-color: var(--background-light);
        color: var(--text-dark);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .container {
        width: 100%;
        max-width: 100%;
        margin: 0;
        padding: 2.5rem;
        box-sizing: border-box;
    }

    /* Header & Navigation */
    .nav-menu {
        display: flex;
        margin-bottom: 2.5rem;
        background-color: var(--content-light);
        border-radius: var(--card-radius);
        overflow: hidden;
        border: 1px solid var(--border-light);
        box-shadow: var(--soft-shadow);
        gap: 0;
        width: fit-content;
    }

    .nav-item {
        padding: 1rem 2rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        font-size: 1.05rem;
        color: var(--text-secondary);
        border-bottom: 3px solid transparent;
        background-color: transparent;
        border-right: 1px solid #E0E0E0; 
    }
    .nav-item:last-child {
        border-right: none;
    }

    .nav-item:hover {
        color: var(--text-dark);
        background-color: var(--button-secondary-bg);
    }

    .nav-item.active {
        color: var(--primary-accent);
        background-color: #E6F0F8; 
        box-shadow: inset 0 -3px 0 0 var(--primary-accent);
    }

    /* Main Content */
    .main-content {
        position: relative;
    }
    .content-section {
        display: none;
    }
    .content-section.active {
        display: block;
    }
    .section-container {
        display: grid;
        grid-template-columns: 1.5fr 2.5fr; 
        gap: 2rem;
        align-items: flex-start;
    }

    /* Titles */
    .left-section h2, .right-section h2 {
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        border-bottom: 2px solid var(--border-light);
        padding-bottom: 0.5rem;
    }

    /* Bid Items - Card Style (Project List) */
    .bid-item {
        background-color: var(--content-light);
        border-radius: var(--card-radius);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 1px solid var(--border-light);
        box-shadow: var(--soft-shadow);
    }

    .bid-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        border-color: var(--primary-teal-light);
    }

    .bid-item.active {
        border: 3px solid var(--primary-accent);
        background-color: #E6F0F8;
        transform: translateY(0);
        box-shadow: 0 0 0 1px var(--primary-accent); 
    }
    
    /* Project Name in Card (Primary Focus) */
    .project-name-title {
        font-weight: 700;
        color: var(--primary-accent);
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
    }

    /* Secondary Detail - Minimalist appearance */
    .bid-title {
        font-weight: 500;
        color: var(--text-primary);
        font-size: 0.95rem;
        margin-bottom: 0.5rem; /* Reduced margin */
        padding-bottom: 0;
        border-bottom: none; /* Removed separator */
    }

    /* Key metric - Budget */
    .bid-price {
        color: var(--highlight-color);
        font-weight: 700;
        margin-bottom: 1rem;
        font-size: 1.1rem;
    }

    /* Removed or hidden details for a cleaner list view */
    .bid-description, .bid-date, 
    .bid-details-grid, .customer-info-section, 
    .floor-section, .customer-info-grid {
        display: none !important; /* Hide elements entirely */
    }

    /* --- RIGHT SECTION STYLES (Kept for completeness and consistency) --- */
    
    /* Right Section - Sticky Details & Form */
    .right-section {
        position: sticky; 
        top: 2rem; 
    }

    .bid-details-content {
        background-color: var(--content-light);
        border-radius: var(--card-radius);
        padding: 2rem;
        border: 1px solid var(--border-light);
        box-shadow: var(--soft-shadow);
    }

    .bid-details-placeholder {
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: var(--text-secondary);
        font-style: italic;
        border: 2px dashed var(--border-light);
        border-radius: var(--card-radius);
        background-color: var(--content-light);
        min-height: 500px;
    }

    .bid-details-content > h2 {
        color: var(--primary-accent);
        font-weight: 800;
        font-size: 2rem;
        border-bottom: 3px solid var(--border-light);
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
    }

    .detail-price {
        color: var(--highlight-color);
        font-weight: 700;
        font-size: 1.6rem;
        margin-bottom: 1.5rem;
    }
    
    /* Additional Info (Sub-cards within main card) */
    .additional-info, .bid-form {
        background-color: #F8F8F8; 
        border-radius: 6px;
        padding: 1.5rem;
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
        border: 1px solid #E0E0E0;
    }

    .additional-info h3, .bid-form h3 {
        color: var(--text-primary);
        font-size: 1.1rem;
        font-weight: 700;
        border-bottom: 1px solid #E0E0E0;
        padding-bottom: 0.5rem;
        margin-bottom: 1rem;
    }

    .info-item {
        padding: 0.75rem 0;
        color: var(--text-secondary);
        border-bottom: 1px solid #F0F0F0;
        font-size: 0.95rem;
    }

    .info-item:last-child {
        border-bottom: none;
    }

    .info-item strong {
        color: var(--primary-accent);
        margin-right: 0.75rem;
        font-weight: 600;
        min-width: 150px;
        display: inline-block;
    }

    /* Forms */
    .form-group label {
        color: var(--text-primary);
        font-weight: 600;
        font-size: 1rem;
    }

    .form-group input, .form-group textarea {
        padding: 1rem;
        border-radius: 6px;
        font-size: 1rem;
        background-color: var(--content-light);
        border: 1px solid var(--border-light);
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05); 
    }

    .form-group input:focus, .form-group textarea:focus {
        border-color: var(--primary-accent);
        box-shadow: var(--input-focus-shadow);
    }

    /* Buttons */
    .btn-primary {
        background-color: var(--primary-accent);
        color: var(--text-on-accent);
        padding: 1rem 2.5rem;
        border-radius: 6px;
        font-weight: 700;
        box-shadow: 0 4px 10px rgba(0, 77, 122, 0.2);
    }

    .btn-primary:hover {
        background-color: var(--primary-accent-hover);
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0, 77, 122, 0.3);
    }
    
    /* Status Section */
    .status-item {
        background-color: var(--content-light);
        border: 1px solid var(--border-light);
        border-radius: var(--card-radius);
        padding: 2rem;
        box-shadow: var(--soft-shadow);
    }

    .status-item-header {
        border-bottom: 1px dashed var(--border-light);
        padding-bottom: 1rem;
    }

    .status-title {
        color: var(--text-primary);
        font-weight: 700;
        font-size: 1.35rem;
    }

    .status-price {
        color: var(--primary-accent);
        font-weight: 700;
        font-size: 1.15rem;
    }

    .your-bid {
        color: var(--status-warning-text);
        font-weight: 700;
        padding: 0.6rem 1rem;
        background-color: var(--status-warning-bg);
        border-radius: 4px;
        font-size: 0.95rem;
        border: 1px solid var(--status-warning-text);
    }

    .status-badge {
        padding: 0.6rem 1.5rem;
        border-radius: 4px;
        font-weight: 700;
        min-width: 120px;
        border: 1px solid;
    }

    .status-details-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    /* No Bids State */
    .no-bids {
        padding: 5rem;
        font-size: 1.2rem;
        font-weight: 600;
    }

    /* Alerts */
    .alert {
        padding: 1.25rem 2rem;
        border-radius: 6px;
        font-size: 1rem;
        font-weight: 700;
    }

    /* Responsive */
    @media (max-width: 992px) {
        .section-container {
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        .right-section {
            position: static;
        }
        .bid-details-content {
            margin-top: 0;
        }
    }
    @media (max-width: 768px) {
        .container { padding: 1.5rem; }
        .bid-details-grid { grid-template-columns: 1fr; }
        .status-details-grid { grid-template-columns: 1fr; }

        .nav-menu { width: 100%; border-radius: 0; box-shadow: none; border-left: none; border-right: none;}
        .nav-item { flex: 1; padding: 0.75rem 1rem; }
    }
    </style>
</head>
<body>
    <%- include('navbar_company') %>
    <div class="container">

        <div class="nav-menu">
            <div class="nav-item active" data-section="place-bid">Place a Bid</div>
            <div class="nav-item" data-section="bid-status">Bid Status</div>
        </div>

        <div class="main-content">

            <div id="place-bid" class="content-section active">
                <% if (typeof req !== 'undefined') { %>
                    <% if (req.query.success === 'bid_submitted') { %>
                        <div class="alert alert-success">Your bid has been submitted successfully!</div>
                    <% } else if (req.query.error === 'invalid_data') { %>
                        <div class="alert alert-danger">Please provide a valid bid amount.</div>
                    <% } else if (req.query.error === 'server_error') { %>
                        <div class="alert alert-danger">An error occurred while processing your bid. Please try again.</div>
                    <% } %>
                <% } %>
          
                <div class="section-container">
          
                    <div class="left-section">
                        <h2>Available Projects</h2>
                        <div class="bid-options">
                            <% if (bids && bids.length > 0) { %>
                                <% bids.forEach(function(bid) { %>
                                    <div class="bid-item" data-bid-id="<%= bid._id %>">
                                        <div class="project-name-title"><%= bid.projectName || 'Unnamed Project' %></div> 
                                        
                                        <div class="bid-title"><%= bid.buildingType %> | <%= bid.totalFloors %> Floors</div>
                                        
                                        <div class="bid-price">Est. Budget: ₹<%= bid.estimatedBudget ? bid.estimatedBudget.toLocaleString('en-IN') : 'Not specified' %></div>
                                        
                                        <div class="bid-description" style="display: none;"><%= bid.specialRequirements || '' %></div>
                                        <div class="bid-date" style="display: none;">Posted: <%= new Date(bid.createdAt).toLocaleDateString('en-IN') %></div>
                                        <div class="bid-details-grid" style="display: none;"></div>
                                        <div class="customer-info-section" style="display: none;"></div>
                                        <div class="floor-section" style="display: none;"></div>
                                    </div>
                                <% }); %>
                            <% } else { %>
                                <div class="no-bids">No projects available for bidding at the moment.</div>
                            <% } %>
                        </div>
                    </div>
          
                    <div class="right-section">
                        <% if (!selectedBid) { %>
                            <div class="bid-details-placeholder">
                                <p>Click on a project to view details and place your bid</p>
                            </div>
                        <% } else { %>
                            <div class="bid-details-content" style="display: block;">
                                <h2><%= selectedBid.projectName || 'Project Details' %></h2>
                                <div class="detail-price">Est. Budget: ₹<%= selectedBid.estimatedBudget ? selectedBid.estimatedBudget.toLocaleString('en-IN') : 'Not specified' %></div>
                                <div class="detail-description"><%= selectedBid.specialRequirements || 'No special requirements provided.' %></div>
                                <div class="detail-date">Posted: <%= new Date(selectedBid.createdAt).toLocaleDateString('en-IN') %></div>
          
                                <div class="additional-info">
                                    <h3>Project Details</h3>
                                    <div class="info-item"><strong>Location:</strong> <%= selectedBid.projectLocation %></div>
                                    <div class="info-item"><strong>Address:</strong> <%= selectedBid.projectAddress %></div>
                                    <div class="info-item"><strong>Total Area:</strong> <%= selectedBid.totalArea %> sq.ft</div>
                                    <div class="info-item"><strong>Timeline:</strong> <%= selectedBid.projectTimeline || 'Not specified' %> months</div>
                                    <div class="info-item"><strong>Total Floors:</strong> <%= selectedBid.totalFloors %></div>
                                    <div class="info-item"><strong>Building Type:</strong> <%= selectedBid.buildingType %></div>
                                    <div class="info-item"><strong>Accessibility Needs:</strong> <%= selectedBid.accessibilityNeeds || 'None' %></div>
                                    <div class="info-item"><strong>Energy Efficiency:</strong> <%= selectedBid.energyEfficiency || 'Standard' %></div>
                                    <div class="info-item"><strong>Status:</strong> <%= selectedBid.status %></div>
                                </div>

                                <div class="additional-info">
                                    <h3>Customer Information</h3>
                                    <div class="info-item"><strong>Name:</strong> <%= selectedBid.customerName %></div>
                                    <div class="info-item"><strong>Email:</strong> <%= selectedBid.customerEmail %></div>
                                    <div class="info-item"><strong>Phone:</strong> <%= selectedBid.customerPhone %></div>
                                </div>

                                <% if (selectedBid.floors && selectedBid.floors.length > 0) { %>
                                <div class="additional-info">
                                    <h3>Floor Information (<%= selectedBid.floors.length %> floors)</h3>
                                    <% selectedBid.floors.forEach(function(floor, index) { %>
                                        <div class="info-item">
                                            <strong>Floor <%= floor.floorNumber %>:</strong> 
                                            <%= floor.floorType %> 
                                            <% if (floor.area) { %>
                                                | Area: <%= floor.area %> sq.ft
                                            <% } %>
                                            <% if (floor.rooms) { %>
                                                | Rooms: <%= floor.rooms %>
                                            <% } %>
                                        </div>
                                    <% }); %>
                                </div>
                                <% } %>

                                <% if (selectedBid.siteFiles && selectedBid.siteFiles.length > 0) { %>
                                <div class="additional-info">
                                    <h3>Site Files</h3>
                                    <% selectedBid.siteFiles.forEach(function(file, index) { %>
                                        <div class="info-item">
                                            <strong>File <%= index + 1 %>:</strong> 
                                            <a href="<%= file %>" target="_blank" style="color: var(--primary-accent);">
                                                View Document
                                            </a>
                                        </div>
                                    <% }); %>
                                </div>
                                <% } %>
          
                                <div class="bid-form">
                                    <h3>Place Your Bid</h3>
                                    <form action="/submit-bid" method="POST">
                                        <div class="form-group">
                                            <label for="bid-amount">Your Bid Amount (₹):</label>
                                            <input type="number" id="bid-amount" name="bidPrice" min="0" step="10000" required>
                                        </div>
                                        <input type="hidden" name="bidId" value="<%= selectedBid._id %>">
                                        <input type="hidden" name="companyName" value="<%= companyName %>">
                                        <input type="hidden" name="companyId" value="<%= companyId %>">
                                        <button type="submit" class="btn-primary">Submit Bid</button>
                                    </form>
                                </div>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>

            <div id="bid-status" class="content-section">
                <h2>Your Bid Status</h2>
                <div class="bid-status-container">
                    <% 
                        const companyBids = locals.companyBids || [];
                        const visibleBids = companyBids.filter(bid => bid.status !== 'rejected');
                        if (visibleBids.length > 0) { 
                    %>
                        <% visibleBids.forEach(function(bid) { %>
                            <div class="status-item">
                                <div class="status-item-header">
                                    <div class="status-info">
                                        <div class="status-title"><%= bid.project.projectName || 'Project' %> - <%= bid.project.totalFloors %> Floors</div>
                                        <div class="status-price">Est. Budget: ₹<%= bid.project.estimatedBudget ? bid.project.estimatedBudget.toLocaleString('en-IN') : 'Not specified' %></div>
                                        <div class="status-description"><%= bid.project.specialRequirements || 'No special requirements provided.' %></div>
                                        <div class="status-date">Posted: <%= new Date(bid.project.createdAt).toLocaleDateString('en-IN') %></div>
                                        <div class="your-bid">Your Bid: ₹<%= bid.bidPrice ? bid.bidPrice.toLocaleString('en-IN') : 'Not specified' %></div>
                                    </div>
                                    <div class="status-badge <%= bid.status.toLowerCase() %>"><%= bid.status %></div>
                                </div>

                                <div class="status-details-grid">
                                    <div class="detail-item">
                                        <span class="detail-label">Location</span>
                                        <span class="detail-value"><%= bid.project.projectLocation %></span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Total Area</span>
                                        <span class="detail-value"><%= bid.project.totalArea %> sq.ft</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Timeline</span>
                                        <span class="detail-value"><%= bid.project.projectTimeline || 'Not specified' %> months</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Building Type</span>
                                        <span class="detail-value"><%= bid.project.buildingType %></span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Accessibility</span>
                                        <span class="detail-value"><%= bid.project.accessibilityNeeds || 'None' %></span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Energy Efficiency</span>
                                        <span class="detail-value"><%= bid.project.energyEfficiency || 'Standard' %></span>
                                    </div>
                                </div>

                                <div class="customer-info-section">
                                    <div class="customer-info-title">Customer Information</div>
                                    <div class="customer-info-grid">
                                        <div class="customer-info-item">
                                            <strong>Name:</strong> <%= bid.project.customerName %>
                                        </div>
                                        <div class="customer-info-item">
                                            <strong>Email:</strong> <%= bid.project.customerEmail %>
                                        </div>
                                        <div class="customer-info-item">
                                            <strong>Phone:</strong> <%= bid.project.customerPhone %>
                                        </div>
                                    </div>
                                </div>

                                <% if (bid.project.floors && bid.project.floors.length > 0) { %>
                                <div class="floor-section">
                                    <div class="floor-title">Floor Details (<%= bid.project.floors.length %> floors)</div>
                                    <div class="floor-list">
                                        <% bid.project.floors.slice(0, 3).forEach(function(floor) { %>
                                            <div class="floor-badge">
                                                Floor <%= floor.floorNumber %>: <%= floor.floorType %>
                                            </div>
                                        <% }); %>
                                    </div>
                                    <% if (bid.project.floors.length > 3) { %>
                                    <button class="expand-toggle" onclick="toggleFloors(event, 'status-<%= bid._id %>')">
                                        <span class="toggle-text">Show <%= bid.project.floors.length - 3 %> more floors</span>
                                        <span class="toggle-icon">▼</span>
                                    </button>
                                    <div class="expandable-content" id="floors-status-<%= bid._id %>">
                                        <div class="floor-list" style="margin-top: 0.5rem;">
                                            <% bid.project.floors.slice(3).forEach(function(floor) { %>
                                                <div class="floor-badge">
                                                    Floor <%= floor.floorNumber %>: <%= floor.floorType %>
                                                </div>
                                            <% }); %>
                                        </div>
                                    </div>
                                    <% } %>
                                </div>
                                <% } %>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <div class="no-bids">You haven't placed any bids yet.</div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>

    <script>
// Toggle floor details expansion
function toggleFloors(event, bidId) {
    event.stopPropagation();
    const button = event.currentTarget;
    const content = document.getElementById('floors-' + bidId);
    const toggleText = button.querySelector('.toggle-text');
    const toggleIcon = button.querySelector('.toggle-icon');
    
    if (content.classList.contains('expanded')) {
        content.classList.remove('expanded');
        const hiddenCount = content.querySelectorAll('.floor-badge').length;
        toggleText.textContent = `Show ${hiddenCount} more floors`;
        toggleIcon.textContent = '▼';
    } else {
        content.classList.add('expanded');
        toggleText.textContent = 'Show less';
        toggleIcon.textContent = '▲';
    }
}

document.addEventListener('DOMContentLoaded', function() {
    // Navigation handling
    const navItems = document.querySelectorAll('.nav-item');
    const contentSections = document.querySelectorAll('.content-section');

    navItems.forEach(item => {
        item.addEventListener('click', function() {
            const targetSection = this.getAttribute('data-section');
            
            navItems.forEach(navItem => navItem.classList.remove('active'));
            this.classList.add('active');
            
            contentSections.forEach(section => {
                section.classList.remove('active');
                if (section.id === targetSection) {
                    section.classList.add('active');
                }
            });
        });
    });

    // Bid selection handling
    const bidItems = document.querySelectorAll('.bid-options .bid-item');
    
    bidItems.forEach(item => {
        item.addEventListener('click', function(e) {
            // Check if the click was on an expandable toggle, and if so, ignore the card click
            if (e.target.closest('.expand-toggle') || e.target.closest('a')) {
                return;
            }

            bidItems.forEach(bidItem => bidItem.classList.remove('active'));
            this.classList.add('active');
            
            const bidId = this.getAttribute('data-bid-id');
            // Navigate to the current page with the bidId to load details
            window.location.href = `/companybids?bidId=${bidId}`;
        });
    });

    // Check if a selectedBid is present on load and highlight the corresponding card
    const urlParams = new URLSearchParams(window.location.search);
    const selectedBidId = urlParams.get('bidId');
    if (selectedBidId) {
        const activeCard = document.querySelector(`.bid-item[data-bid-id="${selectedBidId}"]`);
        if (activeCard) {
            activeCard.classList.add('active');
            // Scroll to the active item on load if necessary
            activeCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    }

    // Form submission handling
    const bidForm = document.querySelector('.bid-form form');
    if (bidForm) {
        bidForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const bidAmountInput = document.getElementById('bid-amount');
            const bidAmount = parseFloat(bidAmountInput.value);
            
            if (!bidAmount || isNaN(bidAmount) || bidAmount <= 0) {
                alert('Please enter a valid bid amount greater than zero.');
                return;
            }
            
            this.submit();
        });
    }

    // Status badge tooltips - Simplified since the CSS handles the look
    const statusBadges = document.querySelectorAll('.status-badge');
    statusBadges.forEach(badge => {
        badge.addEventListener('mouseenter', function() {
            const status = this.textContent.trim().toLowerCase();
            
            let statusMessage = '';
            switch(status) {
                case 'pending':
                    statusMessage = 'Your bid is under review by the client.';
                    break;
                case 'accepted':
                    statusMessage = 'Congratulations! Your bid was accepted.';
                    break;
                case 'rejected':
                    statusMessage = 'Sorry, your bid was not accepted.';
                    break;
            }
            
            this.setAttribute('title', statusMessage);
        });
    });
});
    </script>
</body>
</html>