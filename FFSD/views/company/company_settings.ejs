<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Build & Beyond</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <style>
    :root {
        /* --- "Deep Dive" Dark Theme Palette --- */
        --primary-accent: #2DD4BF; /* Vibrant Teal */
        --primary-accent-darker: #14B8A6;
        --background-dark: #111827; /* Deep Charcoal Blue */
        --content-dark: #1F2937;   /* Lighter shade for cards */
        --border-dark: #374151;
        --text-primary: #F9FAFB;   /* Off-white for readability */
        --text-secondary: #9CA3AF; /* Light grey for secondary info */
        --text-dark: #111827;

        /* Status Colors for Dark Mode */
        --success-color: #10B981;
        --danger-color: #EF4444;
        --danger-color-darker: #DC2626;
    }
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
    }
    body {
        background-color: var(--background-dark); /* THEME CHANGE */
        color: var(--text-primary); /* THEME CHANGE */
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
    }
    .settings-container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 1rem;
    }
    .settings-header {
        margin-bottom: 2rem;
        border-bottom: 2px solid var(--primary-accent); /* THEME CHANGE */
        padding-bottom: 1rem;
    }
    .settings-header h1 {
        color: var(--text-primary); /* THEME CHANGE */
        font-size: 2rem;
    }
    .settings-header p {
        color: var(--text-secondary); /* THEME CHANGE */
        margin-top: 0.5rem;
    }
    .settings-grid {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 2rem;
    }
    .settings-sidebar, .settings-content {
        background-color: var(--content-dark); /* THEME CHANGE */
        border-radius: 12px; /* THEME CHANGE: Softer corners */
        border: 1px solid var(--border-dark); /* THEME CHANGE */
        box-shadow: none; /* THEME CHANGE */
    }
    .settings-sidebar {
        padding: 1.5rem;
    }
    .settings-nav {
        list-style: none;
    }
    .settings-nav li {
        margin-bottom: 0.5rem;
    }
    .settings-nav a {
        display: flex; /* Aligns icon and text */
        align-items: center;
        padding: 0.75rem 1rem;
        color: var(--text-secondary); /* THEME CHANGE */
        text-decoration: none;
        border-radius: 8px; /* THEME CHANGE */
        transition: all 0.3s ease;
        font-weight: 500;
    }
    .settings-nav a:hover, .settings-nav a.active {
        background-color: var(--primary-accent); /* THEME CHANGE */
        color: var(--text-dark); /* THEME CHANGE */
    }
    .settings-nav a i {
        margin-right: 0.75rem; /* Increased spacing */
        width: 20px;
        text-align: center;
    }
    .settings-content {
        padding: 2rem;
    }
    .settings-section {
        margin-bottom: 2rem;
        display: none;
    }
    .settings-section.active {
        display: block;
    }
    .settings-section:last-of-type {
        margin-bottom: 0;
    }
    .settings-section h2 {
        color: var(--text-primary); /* THEME CHANGE */
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid var(--border-dark); /* THEME CHANGE */
    }
    .form-group {
        margin-bottom: 1.5rem;
    }
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--text-secondary); /* THEME CHANGE */
    }
    .form-control {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border-dark); /* THEME CHANGE */
        border-radius: 6px; /* THEME CHANGE */
        font-size: 1rem;
        background-color: var(--background-dark); /* THEME CHANGE */
        color: var(--text-primary); /* THEME CHANGE */
    }
    .form-control:focus {
        outline: none;
        border-color: var(--primary-accent);
        box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.2);
    }
    .form-check {
        display: flex;
        align-items: center;
        margin-bottom: 0.75rem;
    }
    .form-check input {
        margin-right: 0.5rem;
    }
    .btn {
        padding: 0.75rem 1.5rem;
        background-color: var(--primary-accent); /* THEME CHANGE */
        color: var(--text-dark); /* THEME CHANGE */
        border: none;
        border-radius: 6px; /* THEME CHANGE */
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.2s ease;
    }
    .btn:hover {
        background-color: var(--primary-accent-darker);
        transform: translateY(-2px);
    }
    .btn-secondary {
        background-color: var(--border-dark);
        color: var(--text-primary);
    }
    .btn-secondary:hover {
        background-color: #4B5563;
    }
    .btn-danger {
        background-color: var(--danger-color);
        color: var(--text-primary);
    }
    .btn-danger:hover {
        background-color: var(--danger-color-darker);
    }
    .profile-tabs {
        display: flex;
        border-bottom: 1px solid var(--border-dark); /* THEME CHANGE */
        margin-bottom: 1.5rem;
    }
    .profile-tab {
        padding: 0.75rem 1.5rem;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        color: var(--text-secondary); /* THEME CHANGE */
    }
    .profile-tab.active {
        border-bottom-color: var(--primary-accent);
        font-weight: 600;
        color: var(--primary-accent);
    }
    .profile-content {
        display: none;
    }
    .profile-content.active {
        display: block;
    }
    .skills-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }
    .skill-tag {
        background-color: rgba(45, 212, 191, 0.1); /* THEME CHANGE */
        color: var(--primary-accent); /* THEME CHANGE */
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
    }
    .team-member, .project-item, .current-opening-item {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        padding: 1rem;
        border: 1px solid var(--border-dark); /* THEME CHANGE */
        border-radius: 8px; /* THEME CHANGE */
        transition: background-color 0.2s ease;
    }
    .team-member:hover, .project-item:hover, .current-opening-item:hover {
        background-color: var(--background-dark); /* THEME CHANGE */
    }
    .team-member img {
        width: 60px; /* Smaller for a sleeker look */
        height: 60px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 1rem;
    }
    .team-member-info h4, .project-info h4, .current-opening-item h4 {
        margin-bottom: 0.25rem;
        color: var(--text-primary);
    }
    .team-member-info p, .project-info p, .current-opening-item p {
        color: var(--text-secondary); /* THEME CHANGE */
        font-size: 0.9rem;
    }
    .project-item img {
        width: 120px;
        height: 80px;
        object-fit: cover;
        margin-right: 1rem;
        border-radius: 6px; /* THEME CHANGE */
    }
    .did-you-know {
        background-color: var(--background-dark); /* THEME CHANGE */
        padding: 1.5rem;
        border-radius: 8px; /* THEME CHANGE */
        border-left: 4px solid var(--primary-accent);
        margin-bottom: 1.5rem;
    }
    .did-you-know h4 {
        color: var(--primary-accent);
        margin-bottom: 0.5rem;
    }
    .company-size-selector {
        display: flex;
        gap: 1rem;
        margin-top: 0.5rem;
    }
    .company-size-option {
        flex: 1;
        text-align: center;
        padding: 1rem;
        border: 1px solid var(--border-dark); /* THEME CHANGE */
        border-radius: 6px; /* THEME CHANGE */
        cursor: pointer;
        transition: all 0.2s ease;
    }
    .company-size-option.selected {
        border-color: var(--primary-accent);
        background-color: rgba(45, 212, 191, 0.1); /* THEME CHANGE */
        color: var(--primary-accent);
    }
    .company-size-option input {
        display: none;
    }
    textarea.form-control {
        min-height: 120px;
        resize: vertical;
    }
</style>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <%- include('navbar_company') %>
    <div class="settings-container">
        <div class="settings-header">
            <h1>Company Settings</h1>
            <p>Manage your company profile and settings</p>
        </div>
        <div class="settings-grid">
            <div class="settings-sidebar">
                <ul class="settings-nav">
                    <li><a href="#profile" class="active"><i class="fas fa-building"></i> Company Profile</a></li>
                    <li><a href="#security"><i class="fas fa-lock"></i> Security</a></li>
                    <li><a href="#help-center"><i class="fas fa-question-circle"></i> Help Center</a></li>
                    <li><a href="#logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </div>
            <div class="settings-content">
                <div id="profile" class="settings-section active">
                    <h2>Company Profile</h2>
                    
                    <div class="profile-tabs">
                        <div class="profile-tab active" data-tab="worker">Worker Profile</div>
                        <div class="profile-tab" data-tab="customer">Customer Profile</div>
                    </div>
                    
                    <!-- Worker Profile -->
                    <div id="worker-profile" class="profile-content active">
                        <div id="worker-profile-display">
                            <div class="form-group">
                                <label>Company Name</label>
                                <p>L&T Construction</p>
                            </div>
                            <div class="form-group">
                                <label>Location</label>
                                <p>Chennai, India</p>
                            </div>
                            <div class="form-group">
                                <label>Company Size</label>
                                <p>1000+ Employees</p>
                            </div>
                            <div class="form-group">
                                <label>Specializations</label>
                                <div class="skills-tags">
                                    <span class="skill-tag">Commercial Construction</span>
                                    <span class="skill-tag">High-Rise Buildings</span>
                                    <span class="skill-tag">Infrastructure</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Current Openings</label>
                                <div class="current-opening-item">
                                    <h4>Project Manager</h4>
                                </div>
                                <div class="current-opening-item">
                                    <h4>Site Engineer</h4>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>About the Company</label>
                                <p>L&T Construction is a leading construction company with over 25 years of experience in delivering high-quality commercial and infrastructure projects across the country. We pride ourselves on innovation, safety, and timely project delivery.</p>
                            </div>
                            <div class="form-group">
                                <label>Why Join Our Team?</label>
                                <p>We offer competitive salaries, comprehensive benefits, opportunities for career growth, and the chance to work on landmark projects that shape skylines. Our team culture values collaboration, continuous learning, and work-life balance.</p>
                            </div>
                            <button id="edit-worker-profile-btn" class="btn">Edit Worker Profile</button>
                        </div>
                        
                        <form id="worker-profile-edit" style="display: none;">
                            <div class="form-group">
                                <label for="companyName">Company Name</label>
                                <input type="text" id="companyName" class="form-control" value="L&T Construction" readonly>
                            </div>
                            <div class="form-group">
                                <label for="companyLocation">Location</label>
                                <input type="text" id="companyLocation" class="form-control" value="Mumbai, India">
                            </div>
                            <div class="form-group">
                                <label>Company Size</label>
                                <div class="company-size-selector">
                                    <label class="company-size-option selected">
                                        <input type="radio" name="companySize" value="1-10" checked> 1-10 Employees
                                    </label>
                                    <label class="company-size-option">
                                        <input type="radio" name="companySize" value="11-50"> 11-50 Employees
                                    </label>
                                    <label class="company-size-option">
                                        <input type="radio" name="companySize" value="51-200"> 51-200 Employees
                                    </label>
                                    <label class="company-size-option">
                                        <input type="radio" name="companySize" value="201-1000"> 201-1000 Employees
                                    </label>
                                    <label class="company-size-option">
                                        <input type="radio" name="companySize" value="1000+"> 1000+ Employees
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="specializations">Specializations (comma separated)</label>
                                <input type="text" id="specializations" class="form-control" value="Commercial Construction, High-Rise Buildings, Infrastructure">
                            </div>
                            <div class="form-group">
                                <label>Current Openings</label>
                                <div class="current-opening-item">
                                    <input type="text" class="form-control" value="Project Manager">
                                </div>
                                <div class="current-opening-item" style="margin-top: 1rem;">
                                    <input type="text" class="form-control" value="Site Engineer">
                                </div>
                                <button type="button" class="btn btn-secondary" style="margin-top: 0.5rem;">+ Add Opening</button>
                            </div>
                            <div class="form-group">
                                <label for="aboutCompany">About the Company</label>
                                <textarea id="aboutCompany" class="form-control">L&T Construction is a leading construction company with over 25 years of experience in delivering high-quality commercial and infrastructure projects across the country. We pride ourselves on innovation, safety, and timely project delivery.</textarea>
                            </div>
                            <div class="form-group">
                                <label for="whyJoinUs">Why Join Our Team?</label>
                                <textarea id="whyJoinUs" class="form-control">We offer competitive salaries, comprehensive benefits, opportunities for career growth, and the chance to work on landmark projects that shape skylines. Our team culture values collaboration, continuous learning, and work-life balance.</textarea>
                            </div>
                            <button type="button" id="cancel-worker-edit-btn" class="btn btn-secondary" style="margin-right: 1rem;">Cancel</button>
                            <button type="submit" class="btn">Save Changes</button>
                        </form>
                    </div>
                    
                    <!-- Customer Profile -->
                    <div id="customer-profile" class="profile-content">
                        <div id="customer-profile-display">
                            <div class="form-group">
                                <label>Company Name</label>
                                <p>L&T Corporation</p>
                            </div>
                            <div class="form-group">
                                <label>Location</label>
                                <p>Mumbai, India</p>
                            </div>
                            <div class="form-group">
                                <label>Projects Completed</label>
                                <p>150+</p>
                            </div>
                            <div class="form-group">
                                <label>Years in Business</label>
                                <p>25 years</p>
                            </div>
                            <div class="form-group">
                                <label>About the Company</label>
                                <p>L&T Corporation is a diversified conglomerate with interests in technology, manufacturing, and real estate development. We've been transforming ideas into reality for over two decades, creating spaces that inspire and endure.</p>
                            </div>
                            <div class="form-group">
                                <label>Team Members</label>
                                <div class="team-member">
                                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Team Member">
                                    <div class="team-member-info">
                                        <h4>Rajesh Kumar</h4>
                                        <p>CEO & Founder</p>
                                    </div>
                                </div>
                                <div class="team-member">
                                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Team Member">
                                    <div class="team-member-info">
                                        <h4>Priya Sharma</h4>
                                        <p>Head of Projects</p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Completed Projects</label>
                                <div class="project-item">
                                    <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Project">
                                    <div class="project-info">
                                        <h4>Downtown Office Complex</h4>
                                        <p>A 25-story commercial tower with retail spaces and premium office accommodations in the heart of the city.</p>
                                    </div>
                                </div>
                                <div class="project-item">
                                    <img src="https://images.unsplash.com/photo-1505692952047-1a78307da8f2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Project">
                                    <div class="project-info">
                                        <h4>Tech Park Campus</h4>
                                        <p>A 10-acre integrated technology park with office spaces, research facilities, and recreational areas.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="did-you-know">
                                <h4>Did You Know?</h4>
                                <p>Our company was the first in the region to implement sustainable construction practices across all projects, reducing environmental impact by 40% compared to industry standards.</p>
                            </div>
                            <button id="edit-customer-profile-btn" class="btn">Edit Customer Profile</button>
                        </div>
                        
                        <form id="customer-profile-edit" style="display: none;">
                            <div class="form-group">
                                <label for="customerCompanyName">Company Name</label>
                                <input type="text" id="customerCompanyName" class="form-control" value="L&T Corporation" readonly>
                            </div>
                            <div class="form-group">
                                <label for="customerCompanyLocation">Location</label>
                                <input type="text" id="customerCompanyLocation" class="form-control" value="Mumbai, India">
                            </div>
                            <div class="form-group">
                                <label for="projectsCompleted">Projects Completed</label>
                                <input type="text" id="projectsCompleted" class="form-control" value="150+">
                            </div>
                            <div class="form-group">
                                <label for="yearsInBusiness">Years in Business</label>
                                <input type="text" id="yearsInBusiness" class="form-control" value="25 years">
                            </div>
                            <div class="form-group">
                                <label for="customerAboutCompany">About the Company</label>
                                <textarea id="customerAboutCompany" class="form-control">L&T Corporation is a diversified conglomerate with interests in technology, manufacturing, and real estate development. We've been transforming ideas into reality for over two decades, creating spaces that inspire and endure.</textarea>
                            </div>
                            <div class="form-group">
                                <label>Team Members</label>
                                <div class="team-member">
                                    <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Team Member" style="margin-right: 1rem;">
                                        <input type="file" id="member1Image" style="display: none;">
                                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('member1Image').click()">Change Image</button>
                                    </div>
                                    <input type="text" class="form-control" value="Rajesh Kumar" style="margin-bottom: 0.5rem;">
                                    <input type="text" class="form-control" value="CEO & Founder">
                                </div>
                                <div class="team-member" style="margin-top: 1rem;">
                                    <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Team Member" style="margin-right: 1rem;">
                                        <input type="file" id="member2Image" style="display: none;">
                                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('member2Image').click()">Change Image</button>
                                    </div>
                                    <input type="text" class="form-control" value="Priya Sharma" style="margin-bottom: 0.5rem;">
                                    <input type="text" class="form-control" value="Head of Projects">
                                </div>
                                <button type="button" class="btn btn-secondary" style="margin-top: 0.5rem;">+ Add Team Member</button>
                            </div>
                            <div class="form-group">
                                <label>Completed Projects</label>
                                <div class="project-item">
                                    <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                                        <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Project" style="margin-right: 1rem;">
                                        <input type="file" id="project1Image" style="display: none;">
                                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('project1Image').click()">Change Image</button>
                                    </div>
                                    <input type="text" class="form-control" value="Downtown Office Complex" style="margin-bottom: 0.5rem;">
                                    <textarea class="form-control">A 25-story commercial tower with retail spaces and premium office accommodations in the heart of the city.</textarea>
                                </div>
                                <div class="project-item" style="margin-top: 1rem;">
                                    <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                                        <img src="https://images.unsplash.com/photo-1505692952047-1a78307da8f2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Project" style="margin-right: 1rem;">
                                        <input type="file" id="project2Image" style="display: none;">
                                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('project2Image').click()">Change Image</button>
                                    </div>
                                    <input type="text" class="form-control" value="Tech Park Campus" style="margin-bottom: 0.5rem;">
                                    <textarea class="form-control">A 10-acre integrated technology park with office spaces, research facilities, and recreational areas.</textarea>
                                </div>
                                <button type="button" class="btn btn-secondary" style="margin-top: 0.5rem;">+ Add Project</button>
                            </div>
                            <div class="form-group">
                                <label for="didYouKnow">Did You Know?</label>
                                <textarea id="didYouKnow" class="form-control">Our company was the first in the region to implement sustainable construction practices across all projects, reducing environmental impact by 40% compared to industry standards.</textarea>
                            </div>
                            <button type="button" id="cancel-customer-edit-btn" class="btn btn-secondary" style="margin-right: 1rem;">Cancel</button>
                            <button type="submit" class="btn">Save Changes</button>
                        </form>
                    </div>
                </div>

                <div id="security" class="settings-section">
                    <h2>Security Settings</h2>
                    <form>
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <input type="password" id="currentPassword" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="newPassword">New Password</label>
                            <input type="password" id="newPassword" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Confirm New Password</label>
                            <input type="password" id="confirmPassword" class="form-control">
                        </div>
                        <button type="submit" class="btn">Update Password</button>
                        <hr style="margin: 2rem 0;">
                    </form>
                </div>

                <div id="help-center" class="settings-section">
                <h2>Help Center</h2>
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin-bottom: 1rem; color: #555;">Frequently Asked Questions</h3>
                        <div style="padding: 1rem; border: 1px solid var(--border-color); border-radius: 4px; margin-bottom: 1rem;">
                            <div>
                                <span style="font-weight: 600;">How do I create a new project?</span>
                                <p style="margin-top: 0.5rem; color: #666;">Go to the Dashboard and click on the "New Project" button in the top right corner.</p>
                            </div>
                        </div>
                        <div style="padding: 1rem; border: 1px solid var(--border-color); border-radius: 4px; margin-bottom: 1rem;">
                            <div>
                                <span style="font-weight: 600;">How do I invite team members?</span>
                                <p style="margin-top: 0.5rem; color: #666;">Navigate to your project, click on "Team" tab, and use the "Invite Member" button.</p>
                            </div>
                        </div>
                        <div style="padding: 1rem; border: 1px solid var(--border-color); border-radius: 4px; margin-bottom: 1rem;">
                            <div>
                                <span style="font-weight: 600;">How can I track my project's budget?</span>
                                <p style="margin-top: 0.5rem; color: #666;">Use the "Finances" tab within your project to track expenses and compare with your budget.</p>
                            </div>
                        </div>
                    </div>
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin-bottom: 1rem; color: #555;">Support Options</h3>
                        <button class="btn" style="margin-right: 1rem;">Contact Support</button>
                    </div>
                </div>

                <div id="logout" class="settings-section">
                    <h2>Logout</h2>
                    <div style="margin-bottom: 2rem;">
                        <p style="margin-bottom: 1.5rem;">Are you sure you want to log out of your account?</p>
                        <a href="/logout"><button class="btn btn-danger">Logout</button></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
           // Main tab navigation
           const navLinks = document.querySelectorAll('.settings-nav a');
            const sections = document.querySelectorAll('.settings-section');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
        
                    navLinks.forEach(link => link.classList.remove('active'));
                    sections.forEach(section => section.classList.remove('active'));
        
                    this.classList.add('active');
        
                    const targetId = this.getAttribute('href').substring(1);
                    document.getElementById(targetId).classList.add('active');
                });
            });
            
            // Profile sub-tabs navigation
            const profileTabs = document.querySelectorAll('.profile-tab');
            const profileContents = document.querySelectorAll('.profile-content');
            
            profileTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    profileTabs.forEach(t => t.classList.remove('active'));
                    profileContents.forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(`${targetTab}-profile`).classList.add('active');
                });
            });
            
            // Worker profile edit functionality
            const editWorkerProfileBtn = document.getElementById('edit-worker-profile-btn');
            const cancelWorkerEditBtn = document.getElementById('cancel-worker-edit-btn');
            const workerProfileDisplay = document.getElementById('worker-profile-display');
            const workerProfileEdit = document.getElementById('worker-profile-edit');
            
            if (editWorkerProfileBtn) {
                editWorkerProfileBtn.addEventListener('click', function() {
                    workerProfileDisplay.style.display = 'none';
                    workerProfileEdit.style.display = 'block';
                });
            }
            
            if (cancelWorkerEditBtn) {
                cancelWorkerEditBtn.addEventListener('click', function() {
                    workerProfileDisplay.style.display = 'block';
                    workerProfileEdit.style.display = 'none';
                });
            }
            
            // Customer profile edit functionality
            const editCustomerProfileBtn = document.getElementById('edit-customer-profile-btn');
            const cancelCustomerEditBtn = document.getElementById('cancel-customer-edit-btn');
            const customerProfileDisplay = document.getElementById('customer-profile-display');
            const customerProfileEdit = document.getElementById('customer-profile-edit');
            
            if (editCustomerProfileBtn) {
                editCustomerProfileBtn.addEventListener('click', function() {
                    customerProfileDisplay.style.display = 'none';
                    customerProfileEdit.style.display = 'block';
                });
            }
            
            if (cancelCustomerEditBtn) {
                cancelCustomerEditBtn.addEventListener('click', function() {
                    customerProfileDisplay.style.display = 'block';
                    customerProfileEdit.style.display = 'none';
                });
            }
            
            // Company size selector
            const companySizeOptions = document.querySelectorAll('.company-size-option');
            companySizeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    companySizeOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    const radio = this.querySelector('input');
                    radio.checked = true;
                });
            });
        
            // Worker profile form submission
            const workerProfileForm = document.getElementById('worker-profile-edit');
            if (workerProfileForm) {
                workerProfileForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    // Collect form data
                    const formData = {
                        profileType: 'worker',
                        companyName: document.getElementById('companyName').value,
                        companyLocation: document.getElementById('companyLocation').value,
                        companySize: document.querySelector('input[name="companySize"]:checked').value,
                        specializations: document.getElementById('specializations').value,
                        aboutCompany: document.getElementById('aboutCompany').value,
                        whyJoinUs: document.getElementById('whyJoinUs').value,
                        currentOpenings: Array.from(document.querySelectorAll('.current-opening-item input'))
                                          .map(input => input.value)
                    };
    
                    try {
                        const response = await fetch('/update-company-profile', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${localStorage.getItem('token')}` // Assuming you use token-based auth
                            },
                            body: JSON.stringify(formData)
                        });
    
                        const result = await response.json();
                        
                        if (!response.ok) {
                            throw new Error(result.message || 'Failed to update profile');
                        }
    
                        // Update UI with new data
                        document.querySelector('#worker-profile-display .form-group:nth-child(2) p').textContent = formData.companyLocation;
                        document.querySelector('#worker-profile-display .form-group:nth-child(4) .skills-tags').innerHTML = 
                            formData.specializations.split(',').map(skill => 
                                `<span class="skill-tag">${skill.trim()}</span>`
                            ).join('');
                        
                        // Update other fields similarly...
                        workerProfileDisplay.style.display = 'block';
                        workerProfileEdit.style.display = 'none';
                        
                        showAlert('Profile updated successfully!', 'success');
                    } catch (error) {
                        console.error('Error:', error);
                        showAlert('Error updating profile: ' + error.message, 'error');
                    }
                });
            }
        
            // Customer profile form submission
            const customerProfileForm = document.getElementById('customer-profile-edit');
            if (customerProfileForm) {
                customerProfileForm.addEventListener('submit', async function (e) {
                    e.preventDefault();
        
                    const formData = new FormData();
        
                    // Add text fields
                    formData.append('profileType', 'customer');
                    formData.append('companyName', document.getElementById('customerCompanyName').value);
                    formData.append('companyLocation', document.getElementById('customerCompanyLocation').value);
                    formData.append('projectsCompleted', document.getElementById('projectsCompleted').value);
                    formData.append('yearsInBusiness', document.getElementById('yearsInBusiness').value);
                    formData.append('customerAboutCompany', document.getElementById('customerAboutCompany').value);
                    formData.append('didYouKnow', document.getElementById('didYouKnow').value);
        
                    // Process team members
                    const teamMembers = [];
                    const teamMemberInputs = document.querySelectorAll('#customer-profile-edit .team-member');
                    teamMemberInputs.forEach((member) => {
                        const name = member.querySelector('input[type="text"]:nth-of-type(1)').value;
                        const position = member.querySelector('input[type="text"]:nth-of-type(2)').value;
                        const fileInput = member.querySelector('input[type="file"]');
                        if (fileInput.files[0]) {
                            formData.append('memberImages', fileInput.files[0]); // ✅ correct field name for Multer
                        }
                        teamMembers.push({ name, position });
                    });
                    formData.append('teamMembers', JSON.stringify(teamMembers));
        
                    // Process completed projects
                    const completedProjects = [];
                    const projectInputs = document.querySelectorAll('#customer-profile-edit .project-item');
                    projectInputs.forEach((project) => {
                        const title = project.querySelector('input[type="text"]').value;
                        const description = project.querySelector('textarea').value;
                        const fileInput = project.querySelector('input[type="file"]');
                        if (fileInput.files[0]) {
                            formData.append('projectImages', fileInput.files[0]); // ✅ correct field name for Multer
                        }
                        completedProjects.push({ title, description });
                    });
                    formData.append('completedProjects', JSON.stringify(completedProjects));
        
                    try {
                        const response = await fetch('/update-company-profile', {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${localStorage.getItem('token')}`
                            },
                            body: formData
                        });
        
                        const result = await response.json();
        
                        if (!response.ok) {
                            throw new Error(result.message || 'Failed to update profile');
                        }
        
                        // Update UI
                        document.querySelector('#customer-profile-display .form-group:nth-child(2) p').textContent =
                            document.getElementById('customerCompanyLocation').value;
        
                        const teamMembersContainer = document.querySelector('#customer-profile-display .form-group:nth-child(6)');
                        teamMembersContainer.innerHTML = '<label>Team Members</label>' +
                            teamMembers.map(member => `
                                <div class="team-member">
                                    <img src="${member.image || 'https://via.placeholder.com/80'}" alt="Team Member">
                                    <div class="team-member-info">
                                        <h4>${member.name}</h4>
                                        <p>${member.position}</p>
                                    </div>
                                </div>
                            `).join('');
        
                        const projectsContainer = document.querySelector('#customer-profile-display .form-group:nth-child(7)');
                        projectsContainer.innerHTML = '<label>Completed Projects</label>' +
                            completedProjects.map(project => `
                                <div class="project-item">
                                    <img src="${project.image || 'https://via.placeholder.com/120x80'}" alt="Project">
                                    <div class="project-info">
                                        <h4>${project.title}</h4>
                                        <p>${project.description}</p>
                                    </div>
                                </div>
                            `).join('');
        
                        document.getElementById('customer-profile-display').style.display = 'block';
                        document.getElementById('customer-profile-edit').style.display = 'none';
        
                        showAlert('Profile updated successfully!', 'success');
                    } catch (error) {
                        console.error('Error:', error);
                        showAlert('Error updating profile: ' + error.message, 'error');
                    }
                });
            }
        
            // Helper function to show alerts
            function showAlert(message, type) {
                const alertDiv = document.createElement('div');
                alertDiv.style.position = 'fixed';
                alertDiv.style.top = '20px';
                alertDiv.style.right = '20px';
                alertDiv.style.padding = '15px 20px';
                alertDiv.style.borderRadius = '4px';
                alertDiv.style.color = 'white';
                alertDiv.style.zIndex = '1000';
                alertDiv.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
        
                alertDiv.style.backgroundColor = type === 'success' ? '#4D7A70' : '#e74c3c';
                alertDiv.textContent = message;
        
                document.body.appendChild(alertDiv);
                setTimeout(() => {
                    alertDiv.style.opacity = '0';
                    setTimeout(() => document.body.removeChild(alertDiv), 500);
                }, 3000);
            }
        });
        </script>        
</body>
</html>